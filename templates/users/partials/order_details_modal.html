<div class="row">
    <div class="col-md-6">
        <h6>Order Information</h6>
        <table class="table table-sm">
            <tr><td><strong>Order Number:</strong></td><td>#{{ order.order_number|default:order.id }}</td></tr>
            <tr><td><strong>Order Date:</strong></td><td>{{ order.created_at|date:"M d, Y H:i" }}</td></tr>
            <tr><td><strong>Status:</strong></td><td>
                <span class="badge badge-{% if order.order_status == 'pending' %}warning{% elif order.order_status == 'confirmed' %}info{% elif order.order_status == 'processing' %}primary{% elif order.order_status == 'shipped' %}success{% elif order.order_status == 'delivered' %}success{% elif order.order_status == 'completed' %}success{% else %}secondary{% endif %}">
                    {{ order.order_status|title }}
                </span>
            </td></tr>
            <tr><td><strong>Payment Method:</strong></td><td>{{ order.get_payment_display }}</td></tr>
            <tr><td><strong>Total Amount:</strong></td><td>Rs. {{ order.grand_total }}</td></tr>
            {% if order.confirmed_at %}
            <tr><td><strong>Confirmed At:</strong></td><td>{{ order.confirmed_at|date:"M d, Y H:i" }}</td></tr>
            {% endif %}
            {% if order.processing_at %}
            <tr><td><strong>Processing Started:</strong></td><td>{{ order.processing_at|date:"M d, Y H:i" }}</td></tr>
            {% endif %}
        </table>
    </div>
    <div class="col-md-6">
        <h6>Customer Information</h6>
        <table class="table table-sm">
            <tr><td><strong>Name:</strong></td><td>{{ order.user.get_full_name|default:order.user.username }}</td></tr>
            <tr><td><strong>Email:</strong></td><td>{{ order.user.email }}</td></tr>
            <tr><td><strong>Address:</strong></td><td>
                {{ order.address }}<br>
                {{ order.city }}, {{ order.country }}<br>
                ZIP: {{ order.zip }}
            </td></tr>
        </table>
    </div>
</div>

<hr>

<h6>Order Items</h6>
<div class="table-responsive">
    <table class="table table-sm">
        <thead>
            <tr>
                <th>Product</th>
                <th>Variations</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in order_items %}
            <tr>
                <td>
                    <strong>{{ item.product.name }}</strong><br>
                    <small class="text-muted">{{ item.product.description|truncatewords:10 }}</small>
                </td>
                <td>
                    {% if item.has_variations %}
                        {% for variation in item.variations.all %}
                            <small class="badge badge-light">{{ variation.variation_type.display_name }}: {{ variation.variation_option.get_display_value }}</small><br>
                        {% endfor %}
                    {% else %}
                        <small class="text-muted">No variations</small>
                    {% endif %}
                </td>
                <td>{{ item.quantity }}</td>
                <td>Rs. {{ item.get_unit_price|floatformat:2 }}</td>
                <td>Rs. {{ item.price|floatformat:2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if order.tracking_number %}
<hr>
<h6>Shipping Information</h6>
<p><strong>Tracking Number:</strong> {{ order.tracking_number }}</p>
{% if order.shipped_date %}
<p><strong>Shipped Date:</strong> {{ order.shipped_date|date:"M d, Y H:i" }}</p>
{% endif %}
{% if order.shipping_notes %}
<p><strong>Shipping Notes:</strong> {{ order.shipping_notes }}</p>
{% endif %}
{% endif %}

{% if order.delivered_date %}
<hr>
<h6>Delivery Information</h6>
<p><strong>Delivered At:</strong> {{ order.delivered_date|date:"M d, Y H:i" }}</p>
{% endif %}