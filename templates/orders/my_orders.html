{% extends "master/base.html" %} {% load static %} {% block content %}

<!-- ========================= SECTION CONTENT ========================= -->
<section class="section-conten padding-y bg">
  <div class="container">
    <div class="row">
      <aside class="col-md-3">
        <!--   SIDEBAR   -->
        <ul class="list-group">
          <a class="list-group-item" href="/dashboard/"> Dashboard </a>
          <a class="list-group-item active" href="/my-orders/"> My Orders </a>
          <a class="list-group-item" href="/edit-profile/"> Edit Profile </a>
          <a class="list-group-item" href="#"> My Selling Items </a>
          <a class="list-group-item" href="#"> Received Orders </a>
          <a class="list-group-item" href="/change-password/">
            Change Password
          </a>
        </ul>
        <br />
        <a class="btn btn-light btn-block" href="/accounts/logout/">
          <i class="fa fa-power-off"></i> <span class="text">Log out</span>
        </a>
        <!--   SIDEBAR .//END   -->
      </aside>
      <main class="col-md-9">
        {% for order in orders %}
        <article class="card">
          <header class="card-header">
            <strong class="d-inline-block mr-3"
              >Order ID: {{ order.id }}</strong
            >
            <span>Order Date: {{ order.created_at|date:"d M Y" }}</span>
          </header>
          <div class="card-body">
            <div class="row">
              <div class="col-md-8">
                <h6 class="text-muted">Delivery to</h6>
                <p>
                  {{ order.user.get_full_name }}<br />
                  Phone: {{ order.user.profile.phone }}<br />
                  Email: {{ order.user.email }}<br />
                  Address: {{ order.address }}, {{ order.city }}, {{
                  order.country }}, {{ order.zip }}
                </p>
              </div>
              <div class="col-md-4">
                <h6 class="text-muted">Payment</h6>
                <span class="text-success">
                  <i class="fab fa-lg fa-cc-visa"></i>
                  {{ order.payment_method }}
                </span>
                <p>
                  Subtotal: ${{ order.total|floatformat:2 }}<br />
                  Tax: ${{ order.tax|floatformat:2 }}<br />
                  <span class="b"
                    >Total: ${{ order.grand_total|floatformat:2 }}</span
                  >
                </p>
              </div>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table table-hover">
              {% for item in order.items.all %}
              <tr>
                <td width="65">
                  {% if item.product.image %}
                  <img
                    src="{{ item.product.image.url }}"
                    class="img-xs border"
                  />
                  {% else %}
                  <img
                    src="https://via.placeholder.com/65x65?text=No+Image"
                    class="img-xs border"
                  />
                  {% endif %}
                </td>
                <td>
                  <p class="title mb-0">{{ item.product.name }}</p>
                  <var class="price text-muted"
                    >USD {{ item.price|floatformat:2 }}</var
                  >
                </td>
                <td>
                  Seller <br />
                  {{ item.product.seller|default:"-" }}
                </td>
                <td width="250">
                  <a href="#" class="btn btn-outline-primary">Track order</a>
                  <a href="#" class="btn btn-light"> Details </a>
                </td>
              </tr>
              {% endfor %}
            </table>
          </div>
        </article>
        {% endfor %}
      </main>
    </div>
    <!-- row.// -->
  </div>
</section>
{% endblock %}
