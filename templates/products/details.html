{% extends "master/base.html" %} {% load static %} {% block content %}

<section class="section-content padding-y bg">
  <div class="container">
    <!-- ============================ COMPONENT 1 ================================= -->
    <div class="card">
      <div class="row no-gutters">
        <aside class="col-md-6">
          <article class="gallery-wrap">
            <div class="img-big-wrap">
              <a href="#">
                {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" />
                {% else %}
                <img
                  src="https://via.placeholder.com/300x300?text=No+Image"
                  alt="No Image"
                />
                {% endif %}
              </a>
            </div>
            <!-- img-big-wrap.// -->
          </article>
          <!-- gallery-wrap .end// -->
        </aside>
        <main class="col-md-6 border-left">
          <article class="content-body">
            <h2 class="title">{{ product.name }}</h2>

            <div class="mb-3">
              <var class="price h4">Rs.{{ product.price }}</var>
            </div>

            <p>{{ product.description }}</p>

            <hr />
            <div class="row">
              <div class="item-option-select">
                <h6>Choose Color</h6>
                <div
                  class="btn-group btn-group-sm btn-group-toggle"
                  data-toggle="buttons"
                >
                  <label class="btn btn-light">
                    <input type="radio" name="radio_color" /> Silver
                  </label>
                  <label class="btn btn-light">
                    <input type="radio" name="radio_color" /> Gray
                  </label>
                  <label class="btn btn-light active">
                    <input type="radio" name="radio_color checked" /> Gold
                  </label>
                  <label class="btn btn-light">
                    <input type="radio" name="radio_color" /> Black
                  </label>
                </div>
              </div>
            </div>
            <!-- row.// -->
            <div class="row">
              <div class="item-option-select">
                <h6>Select Size</h6>
                <div
                  class="btn-group btn-group-sm btn-group-toggle"
                  data-toggle="buttons"
                >
                  <label class="btn btn-light">
                    <input type="radio" name="radio_color" /> S
                  </label>
                  <label class="btn btn-light active">
                    <input type="radio" name="radio_color" checked /> M
                  </label>
                  <label class="btn btn-light">
                    <input type="radio" name="radio_color" /> L
                  </label>
                  <label class="btn btn-light">
                    <input type="radio" name="radio_color" /> XL
                  </label>
                </div>
              </div>
            </div>
            <!-- row.// -->
            <hr />
            {% if product.stock <= 0 %}
            <button class="btn btn-danger" disabled>Out of Stock</button>
            {% else %} {% if product.stock <= 5 %}
            <p class="text-warning">Only {{ product.stock }} left in stock!</p>
            {% endif %} {% if in_cart %}
            <a class="btn btn-success" disabled>
              <span class="text">Added to Cart</span>
              <i class="fas fa-check"></i>
            </a>
            <a href="{% url 'cart' %}" class="btn btn-outline-primary">
              <span class="text">View Cart</span>
              <i class="fa fa-shopping-cart"></i>
            </a>
            {% else %}
            <a href="{% url 'add_cart' product.id %}" class="btn btn-primary">
              <span class="text">Add to Cart</span>
              <i class="fas fa-shopping-cart"></i>
            </a>
            {% endif %} {% endif %}
          </article>
          <!-- product-info-aside .// -->
        </main>
        <!-- col.// -->
      </div>
      <!-- row.// -->
    </div>
    <!-- card.// -->
    <!-- ============================ COMPONENT 1 END .// ================================= -->

    <br />

    <div class="row">
      <div class="col-md-9">
        <header class="section-heading">
          <h3>Customer Reviews</h3>
        </header>

        {% for review in reviews %}
        <article class="box mb-3">
          <div class="icontext w-100">
            <img
              src="{% static 'images/avatars/avatar1.jpg' %}"
              class="img-xs icon rounded-circle"
            />
            <div class="text">
              <span class="date text-muted float-md-right"
                >{{ review.created_at|date:"d.m.Y" }}</span
              >
              <h6 class="mb-1">
                {{ review.user.first_name }} {{ review.user.last_name }}
              </h6>
              <div class="rating-star">
                {% for i in "12345"|make_list %} 
                  {% if forloop.counter <= review.rating %}
                    <i class="fa fa-star text-warning"></i>
                  {% else %}
                    <i class="fa fa-star text-muted"></i>
                {% endif %} {% endfor %}
              </div>
            </div>
          </div>
          <div class="mt-3">
            <h6>{{ review.subject }}</h6>
            <p>{{ review.review }}</p>
          </div>
        </article>
        {% empty %}
        <p>No reviews yet.</p>
        {% endfor %}
      </div>
    </div>
    <!-- row.// -->
  </div>
  <!-- container .//  -->
</section>
{% endblock %}
